replicaCount: 1

image:
  repository: registry
  tag: "2.8.3"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 443

# Enable HTTPS
https:
  enabled: true
  tls:
    secretName: registry-cache-tls
    # You'll need to create a secret with these keys:
    # tls.crt: Your TLS certificate
    # tls.key: Your TLS private key

# Use a Persistent Volume Claim to store the cached images
persistence:
  enabled: true
  storageClass: ""  # Use cluster default
  accessMode: ReadWriteOnce
  size: 20Gi

# Registry configuration for caching
registry:
  proxy:
    enabled: true
    remoteUrl: "https://ghcr.io"
  storage:
    cache:
      blobdescriptor: inmemory
  # Configure HTTP
  http:
    addr: :80
  # Configure HTTP
  https:
    addr: :443
  # Configure proxy cache TTL
  middleware:
    registry:
      - name: proxycache
        options:
          ttl: 86400

securityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

resources:
  limits:
    cpu: 2000m
    memory: 2048Mi
  requests:
    cpu: 250m
    memory: 512Mi
